<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to the did Package • did</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/sandstone/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to the did Package">
<meta property="og:description" content="did">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">did</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/did-basics.html">Introduction to the did Package</a>
    </li>
    <li>
      <a href="../articles/multi-period-did.html">DID with Multiple Time Periods</a>
    </li>
    <li>
      <a href="../articles/pre-testing.html">Pre-Testing</a>
    </li>
    <li>
      <a href="../articles/tests.html">Introduction to the did Package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to the did Package</h1>
                        <h4 class="author">Brantly Callaway and Pedro H.C. Sant'Anna</h4>
            
            <h4 class="date">2020-03-30</h4>
      
      
      <div class="hidden name"><code>did-basics.Rmd</code></div>

    </div>

    
    
<p>Note: This is a work in progress…</p>
<p>This vignette discusses the basics of using Difference-in-Differences (DID) designs to identify and estimate the average effect of participating in a treatment with a particular focus on tools from the <code>did</code> package.</p>
<div id="a-running-example" class="section level1">
<h1 class="hasAnchor">
<a href="#a-running-example" class="anchor"></a>A Running Example</h1>
<p>Throughout the vignette, we use a subset of data that comes from Callaway and Sant’Anna (2019). This is a dataset that contains county-level teen employment rates from 2003-2007. The data can be loaded by</p>
<div class="sourceCode"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">did</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">mpdta</span>)</pre></body></html></div>
<p><code>mpdta</code> is a balanced panel with 2500 observations. And the dataset looks like</p>
<div class="sourceCode"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">mpdta</span>)
<span class="co">#&gt;     year countyreal     lpop     lemp first.treat treat</span>
<span class="co">#&gt; 866 2003       8001 5.896761 8.461469        2007     1</span>
<span class="co">#&gt; 841 2004       8001 5.896761 8.336870        2007     1</span>
<span class="co">#&gt; 842 2005       8001 5.896761 8.340217        2007     1</span>
<span class="co">#&gt; 819 2006       8001 5.896761 8.378161        2007     1</span>
<span class="co">#&gt; 827 2007       8001 5.896761 8.487352        2007     1</span>
<span class="co">#&gt; 937 2003       8019 2.232377 4.997212        2007     1</span></pre></body></html></div>
<p>In particular applications, the dataset should look like this with the key parts being:</p>
<ul>
<li><p>There needs to be an <code>id</code> variable. In <code>mpdta</code>, it is the variable <code>countyreal</code>. This should not vary over time for particular units.</p></li>
<li><p>There needs to be a <code>time</code> variable. In <code>mpdta</code>, it is the variable <code>year</code></p></li>
<li><p>In this application, the outcome is <code>lemp</code></p></li>
<li><p>There needs to be a <code>treatment</code> variable. In <code>mpdta</code>, it is the variable <code>treat</code>. This variable indicates whether or not an individual is ever treated. Thus, it should be set equal to 1 in all periods for individuals that are treated at any point. It should be set equal to 0 for individuals that are never treated.</p></li>
<li><p>There needs to be a <code>first.treated</code> variable. In <code>mpdta</code>, it is the variable <code>first.treat</code>. This is the time period when an individual first becomes treated. For individuals that are never treated, this variable should be set equal to 0.</p></li>
<li><p>The <code>did</code> package allows for incorporating covariates (see below). In <code>mpdta</code>, <code>lpop</code> is the log of county population. The <code>did</code> package requires that covariates be time-invariant. For time varying covariates like county population, we recommend using the value of the covariate in the first time period.</p></li>
</ul>
<p>Here are some additional comments about the data structure:</p>
<ul>
<li><p>In the case with panel data, the <code>did</code> package “balances” the panel by dropping individual units which do not have observations in each time period.</p></li>
<li><p>The <code>did</code> package requires that there are some individuals that are never treated. In some applications, eventually all individuals become treated and identifying treatment effects is based on exploiting differences in the timing when individuals become treated. One way around this is to drop the last time period and call the group of individuals that are first treated in the last period as the control group (i.e., set <code>treat=0</code> for that group)</p></li>
<li><p>The <code>did</code> package is only built to handle staggered treatment adoption designs. This means that once an individual becomes treated, they remain treated in all subsequent periods.</p></li>
</ul>
</div>
<div id="identification" class="section level1">
<h1 class="hasAnchor">
<a href="#identification" class="anchor"></a>Identification</h1>
<p>First, we provide a brief overview of how identification works as well as parameters of interest in DID designs.</p>
The main identifying assumption in DID designs is called a parallel trends assumption. Let <span class="math inline">\(Y_{it}(0)\)</span> denote an individual’s untreated “potential” outcome in time period <span class="math inline">\(t\)</span> and <span class="math inline">\(Y_{it}(1)\)</span> denote an individual’s treated “potential” outcome in time period <span class="math inline">\(t\)</span>. The observed outcome for an individual is <span class="math inline">\(Y_{it} = D_i Y_{it}(1) - (1-D_i)Y_{it}(0)\)</span>.
<span class="math display">\[\begin{align*}
 E[\Delta Y_t(0) | X, D=1] = E[\Delta Y_t(0)|X,D=1]
\end{align*}\]</span>
</div>
<div id="estimation" class="section level1">
<h1 class="hasAnchor">
<a href="#estimation" class="anchor"></a>Estimation</h1>
<div id="two-groups-two-periods" class="section level2">
<h2 class="hasAnchor">
<a href="#two-groups-two-periods" class="anchor"></a>Two-Groups / Two Periods</h2>
</div>
<div id="multiple-groups-and-periods" class="section level2">
<h2 class="hasAnchor">
<a href="#multiple-groups-and-periods" class="anchor"></a>Multiple Groups and Periods</h2>
</div>
</div>
<div id="common-issues-using-the-did-package" class="section level1">
<h1 class="hasAnchor">
<a href="#common-issues-using-the-did-package" class="anchor"></a>Common Issues using the <code>did</code> package</h1>
</div>
<div id="references" class="section level1">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Brantly Callaway, Pedro H.C. Sant'Anna.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
